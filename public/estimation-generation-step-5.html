<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/dist/styles.css" rel="stylesheet">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32x.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/images/favicon-48x48x.png">
    <link rel="icon" type="image/png" sizes="180x180" href="/images/favicon-180x180x.png">
</head>
<body>
<div class="site-wrapper">
    <header id="header-placeholder" class="site-header"></header>
    <main class="site-main">
        <div class="site-main__content site-main__content--estimations">
            <div class="dashboard flex">
                <div class="dashboard__sidebar flex flex-col justify-between p-6">
                    <div>
                        <div>
                            <ul class="flex flex-col gap-3">
                                <li class="dashboard__sidebar-active flex items-center ps-2.5 pe-2.5 pt-2 pb-2 rounded-xl">
                                    <div class="dashboard__sidebar-image">
                                        <img src="images/icons/folders-active-icon.svg">
                                    </div>
                                    <a href="estimations.html">Estimations</a>
                                </li>
                                <li class="flex items-center ps-2.5 pe-2.5 pt-2 pb-2 rounded-xl">
                                    <div class="dashboard__sidebar-image">
                                        <img src="images/icons/clients-icon.svg">
                                    </div>
                                    <a href="clients.html">Clients</a>
                                </li>
                                <li class="flex items-center ps-2.5 pe-2.5 pt-2 pb-2 rounded-xl">
                                    <div class="dashboard__sidebar-image">
                                        <img src="images/icons/files-icon.svg">
                                    </div>
                                    <a href="projects.html">Projects</a>
                                </li>
                                <li class="flex items-center ps-2.5 pe-2.5 pt-2 pb-2 rounded-xl">
                                    <div class="dashboard__sidebar-image">
                                        <img src="images/icons/templates-icon.svg">
                                    </div>
                                    <a href="templates.html">Templates</a>
                                </li>
                                <li class="flex items-center ps-2.5 pe-2.5 pt-2 pb-2 rounded-xl">
                                    <div class="dashboard__sidebar-image">
                                        <img src="images/icons/ai-settings-icon.svg">
                                    </div>
                                    <a href="ai-settings.html">AI Settings</a>
                                </li>
                                <li class="flex items-center ps-2.5 pe-2.5 pt-2 pb-2 rounded-xl">
                                    <div class="dashboard__sidebar-image">
                                        <img src="images/icons/audio-icon.svg">
                                    </div>
                                    <a href="support-requests.html">AI Settings</a>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <ul class="flex flex-col gap-3">
                                <li class="flex items-center ps-2.5 pe-2.5 pt-2 pb-2 rounded-xl">
                                    <div class="dashboard__sidebar-image">
                                        <img src="images/icons/settings-icon.svg">
                                    </div>
                                    <a href="settings.html">Settings</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="dashboard__content">
                    <div class="flex pt-[17px] ps-[16px] pe-[16px] pb-[17px] lg:pt[17px] lg:ps-[32px] lg:pe-[32px] lg:pb-[17px] dashboard__colored-background">
                        <div class="flex w-full justify-between items-center">
                            <div class="flex items-center">
                                <h1 class="text-[18px] lg:text-2xl font-bold text-[#7D55BE]">Estimate</h1>
                                <div class="text-[12px] bg-[#7D55BE] rounded-[24px] ps-3 pe-3 pt-1 pb-1 text-white flex justify-center items-center ml-2">
                                    5/5
                                </div>
                            </div>
                            <div class="flex items-center">
                                <a class="btn inline-block btn__cancel mr-2 lg:mr-4" href="/estimation-generation-step-4.html">
                                    <div class="hidden lg:block">Back</div>
                                    <div class="block lg:hidden">
                                        <img src="images/icons/arrow-left-long.svg" alt="arrow left">
                                    </div>
                                </a>
                                <a class="btn inline-block btn__next-step" href="/estimations.html">
                                    <div class="hidden lg:block">Save</div>
                                    <div class="block lg:hidden">
                                        <img src="images/icons/arrow-right-long.svg" alt="arrow left">
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div id="id-form-stepper"></div>
                        <div class="custom-divider"></div>
                    </div>

                    <form class="custom-form">
                        <div class="custom-form-container-short pt-4 ps-4 pe-4 lg:pt-8 lg:ps-8 lg:pe-8">
                            <div class="custom-form-block">
                                <div class="custom-form-block-header flex justify-between">
                                    <div>
                                        <div class="text-[16px] font-semibold lg:text-[18px] text-[#333333] mb-2">
                                            Finalize & Export
                                        </div>
                                        <div class="text-[13px] font-normal lg:text-[16px] text-[#676C76]">
                                            Select template
                                        </div>
                                    </div>
                                    <div>
                                        <a href="#" class="btn inline-block btn__purple">
                                            <span>
                                                Template Settings</span>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <div class="wrap-custom-form-template flex flex-col sm:flex-row gap-[10px] content-center flex-wrap mb-4">
                                <div class="custom-form-template">
                                    <div class="custom-form-template-image">
                                        <img src="images/admin/template-image-1.png">
                                    </div>
                                    <div class="custom-form-template-header">
                                        <div class="custom-form-template-header-title">Lilac</div>
                                        <div class="custom-form-template-header-text">Pastel color scheme</div>
                                    </div>
                                </div>

                                <div class="custom-form-template">
                                    <div class="custom-form-template-image">
                                        <img src="images/admin/template-image-2.png">
                                    </div>
                                    <div class="custom-form-template-header">
                                        <div class="custom-form-template-header-title">Turquoise</div>
                                        <div class="custom-form-template-header-text">Pastel color scheme</div>
                                    </div>
                                </div>

                                <div class="custom-form-template">
                                    <div class="custom-form-template-image">
                                        <img src="images/admin/template-image-3.png">
                                    </div>
                                    <div class="custom-form-template-header">
                                        <div class="custom-form-template-header-title">Green</div>
                                        <div class="custom-form-template-header-text">Pastel color scheme</div>
                                    </div>
                                </div>
                            </div>

                            <div class="wrap-custom-form-switcher flex pb-2 flex-col gap-[10px] flex-wrap justify-center lg:justify-start">
                                <div class="custom-form-switcher-title">Public Access</div>
                                <div class="custom-form-switcher-body">
                                    <div class="custom-form-switcher-body-input">
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input id="isShowEstimatePublicly" type="checkbox" class="sr-only peer">
                                            <div class="w-[40px] h-[24px] bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[3px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-[16px] after:w-[16px] after:transition-all peer-checked:bg-[#7D55BE]"></div>
                                        </label>
                                    </div>
                                    <div class="custom-form-switcher-body-label">
                                        Showing the estimate publicly?
                                    </div>
                                </div>
                            </div>

                            <div>
                                <div class="custom-form-block">
                                    <div class="custom-form-block-header flex justify-between mb-2">
                                        <div>
                                            <div class="text-[16px] font-semibold lg:text-[18px] text-[#333333] mb-2">
                                                Export Estimate
                                            </div>
                                            <div class="text-[13px] font-normal lg:text-[16px] text-[#676C76]">
                                                Select template
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="wrap-custom-form-export flex flex-col sm:flex-row gap-[10px] flex-wrap justify-start mb-4">
                                    <div class="custom-form-export custom-form-export">
                                        <div class="custom-form-export-body">
                                            <div class="custom-form-export-body-image">
                                                <img src="images/admin/website-icon.svg">
                                            </div>
                                            <div class="custom-form-export-body-title custom-form-export-body-title">
                                                Public Web Page
                                            </div>
                                        </div>
                                    </div>
                                    <div class="custom-form-export">
                                        <div class="custom-form-export-body">
                                            <div class="custom-form-export-body-image">
                                                <img src="images/admin/pdf-icon.svg">
                                            </div>
                                            <div class="custom-form-export-body-title">
                                                Export PDF
                                            </div>
                                        </div>
                                    </div>
                                    <div class="custom-form-export">
                                        <div class="custom-form-export-body">
                                            <div class="custom-form-export-body-image">
                                                <img src="images/admin/google-drive-icon.svg">
                                            </div>
                                            <div class="custom-form-export-body-title">
                                                Upload to Google Drive
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-navigation mb-4">
                                <a class="btn inline-block btn__cancel-main" href="/estimation-generation-step-4.html">
                                    Back
                                </a>
                                <a class="btn inline-block btn__next-main" href="/estimations.html">
                                    Save
                                </a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div id="id-bottom-navbar-menu" class="bottom-navbar block lg:hidden"></div>
    </main>
    <footer class="site-footer hidden lg:flex" id="footer-placeholder"></footer>
</div>
</body>
</html>
<script src="main.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const headerPlaceholder = document.getElementById('header-placeholder');
        if (headerPlaceholder) {
            await fetch('/header-authorized.html')
                .then(response => response.text())
                .then(html => {
                    headerPlaceholder.innerHTML = html;
                });
        }

        const footerPlaceholder = document.getElementById('footer-placeholder');
        if (footerPlaceholder) {
            await fetch('/footer-authorized.html')
                .then(response => response.text())
                .then(html => {
                    footerPlaceholder.innerHTML = html;
                });
        }

        const popupMenuEl = document.getElementById('id-popup-menu');
        if (popupMenuEl) {
            await fetch('/components/popup-menu.html')
                .then(response => response.text())
                .then(html => {
                    popupMenuEl.innerHTML = html;
                });
        }

        const bottomNavEl = document.getElementById('id-bottom-navbar-menu');
        if (bottomNavEl) {
            await fetch('/components/mobile-bottom-navbar/bottom-navbar-estimation.html')
                .then(response => response.text())
                .then(html => {
                    bottomNavEl.innerHTML = html;
                });
        }

        const stepperEl = document.getElementById('id-form-stepper');
        if (stepperEl) {
            await fetch('/components/form-stepper/step-5.html')
                .then(response => response.text())
                .then(html => {
                    stepperEl.innerHTML = html;
                    initHeader();
                })
                .then(() => {
                    requestAnimationFrame(() => {
                        const block = document.querySelector('.form-stepper__steps');
                        if (block) {
                            block.scrollLeft = block.scrollWidth;
                        }
                    });
                });
        }

        document.querySelectorAll('.custom-form-template').forEach(template => {
            template.addEventListener('click', () => {
                document.querySelectorAll('.custom-form-template').forEach(el => el.classList.remove('active'));

                template.classList.add('active');
            });
        });

        fetch('/components/terms-and-service-modal.html')
            .then(res => res.text())
            .then(html => {
                document.body.insertAdjacentHTML('beforeend', html);

                const modal = document.getElementById('termsAndServiceModal');
                if (!modal) return;

                modal.addEventListener('click', (e) => {
                    if (e.target === modal) openModal(false, 'termsAndServiceModal');
                });

                const container = modal.querySelector('.terms-and-privacy-modal__container');
                if (container) container.addEventListener('click', (e) => e.stopPropagation());
            });

        fetch('/components/privacy-policy-modal.html')
            .then(res => res.text())
            .then(html => {
                document.body.insertAdjacentHTML('beforeend', html);

                const modal = document.getElementById('privacyAndPolicyModal');
                if (!modal) return;

                modal.addEventListener('click', (e) => {
                    if (e.target === modal) openModal(false, 'privacyAndPolicyModal');
                });

                const container = modal.querySelector('.terms-and-privacy-modal__container');
                if (container) container.addEventListener('click', (e) => e.stopPropagation());
            });


        initSelectForCountries();
        initCollapseBlocks();
    });
</script>